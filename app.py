from flask import Flask, request, jsonify, render_templatefrom elasticsearch import Elasticsearchfrom flask_cors import CORSapp = Flask(__name__)CORS(app)es = Elasticsearch(    "https://localhost:9200",    basic_auth=("elastic", "A5p5tbLTQHRHPd9Psnk4"),    verify_certs=False,)@app.route("/")def home():    return render_template("index.html")@app.route("/search", methods=["GET"])def search_books():    query = request.args.get("query", "").strip()    category = request.args.get("category", "").strip()    publisher = request.args.get("publisher", "").strip()    price_min = request.args.get("price_min", "").strip()    price_max = request.args.get("price_max", "").strip()    if not (query or category or publisher or price_min or price_max):        return jsonify({"error": "Please provide at least one search criterion."}), 400    body = {        "query": {            "bool": {                "must": [],                "filter": []            }        }    }    if query:        body["query"]["bool"]["must"].append({            "multi_match": {                "query": query,                "fields": ["Title^3", "Authors", "Description", "Category"]            }        })    if category:        body["query"]["bool"]["filter"].append({"match": {"Category": category}})    if publisher:        body["query"]["bool"]["filter"].append({"term": {"Publisher.keyword": publisher}})    if price_min or price_max:        price_filter = {}        if price_min:            price_filter["gte"] = float(price_min)        if price_max:            price_filter["lte"] = float(price_max)        body["query"]["bool"]["filter"].append({"range": {"Price_Starting_With_($)": price_filter}})    res = es.search(index="books", body=body)    results = [hit["_source"] for hit in res["hits"]["hits"]]    return jsonify(results)if __name__ == "__main__":    app.run(port=8000, debug=True)